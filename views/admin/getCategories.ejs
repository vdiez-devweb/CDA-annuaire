<%- include('../_head'); %>
</head>
<body>
    <%- include('_header'); %>

    <div class="container">
        <div class="row">
            <!-- <div class="col-sm-4 col-md-3 col-xl-2"> -->
            <div>
                <h1><%= title %></h1>
            </div>
         </div>

        <% if (categories) { %>
            <div>
                <a href="<%=baseURL%>/admin/create-category" class="btn btn-outline-success btn-sm" role="button"><i class="fa-solid fa-square-plus px-1"></i>Créer une catégorie</a>
                <a href="<%=baseURL%>/admin/create-product" class="btn btn-outline-success btn-sm" role="button"><i class="fa-solid fa-square-plus px-1"></i>Créer un produit</a>
                <a href="<%=baseURL%>/admin/products" class="btn btn-success btn-sm" role="button"><i class="fa-solid fa-eye px-1"></i> Voir tous les produits</a>
            </div>
            <table class="table table-bordered mt-3">
                <thead class="table-light">
                    <tr>
                        <th scope="col">-</th>
                        <th scope="col">Catégorie</th>
                        <th scope="col">Slug</th>
                        <th scope="col">Description</th>
                        <th scope="col">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% categories.forEach(function(currentCategory) { %>

                        <tr>
                            <td>
                            <% if (currentCategory.categoryImg) { %>
                                <img class="shadow p-2 rounded" src="/images/<%= currentCategory.categorySlug %>-75.jpg">
                            <% } else { %>
                                <img class="shadow p-2 rounded" src="/images/default-75.jpg">
                            <% }  %>


                            </td>
                            <th scope="row"><%= currentCategory.categoryName %> </th>
                            <td><%= currentCategory.categorySlug %></td>
                            <td><%= currentCategory.categoryDescription %></td>
                            <td>
                                <!-- <a href="admin/category/<%= currentCategory.categorySlug %>" alt="Voir les produits de la catégorie"><i class="fa-solid fa-magnifying-glass px-1"></i></a>                 -->
                                <div><a href="<%=baseURL%>/admin/category/<%= currentCategory.categorySlug %>"><i class="fa-solid fa-magnifying-glass px-1"></i>Voir les <%= currentCategory.categoryNbProducts %> produits</a></div>                
                                <div><a href="<%=baseURL%>/admin/update-category/<%= currentCategory.categorySlug %>"><i class="fa-solid fa-pen-to-square px-1"></i>Modifier</a></div>      
                                <div><a href="<%=baseURL%>/admin/delete-category/<%= currentCategory.categorySlug %>"><i class="fa-solid fa-trash px-1"></i>Supprimer</a></div>                     
                            </td>
                        </tr>

                    <% }); %>
                </tbody>
            </table>
        <p>&nbsp;</p>

        <% } else { %>
            <p class="alert alert-warning"><%= message %></p>
            <div>
                <a href="<%=baseURL%>/admin/create-category" class="btn btn-outline-success btn-sm" role="button"><i class="fa-solid fa-square-plus px-1"></i>Créer une catégorie</a>
            </div>
            <% } %>              
  
        <div class="mt-5">
            <a href="<%=baseURL%>/admin" class="btn btn-success btn-sm mb-5" role="button"><i class="fa-solid fa-house-lock pe-2"></i>Retour au panneau d'administration</a>
        </div>
<%- include('../_footer'); %>